---
/**
 * Public Layout
 * 
 * Layout for public pages (landing, login, register)
 */

import Layout from './Layout.astro';
import Navbar from '@/components/navigation/Navbar.astro';

interface Props {
  title: string;
  description?: string;
}

const { title, description } = Astro.props;
---

<Layout title={title} description={description}>
  <div class="min-h-screen flex flex-col">
    <Navbar variant="public" />
    
    <main class="flex-1">
      <slot />
    </main>

    <footer class="border-t py-6 md:py-8">
      <div class="container mx-auto px-4">
        <div class="flex flex-col md:flex-row justify-between items-center gap-4 text-sm text-muted-foreground">
          <p>&copy; 2025 10x-cards. Wszystkie prawa zastrzeżone.</p>
          <div class="flex gap-4">
            <a href="/privacy" class="hover:text-foreground transition-colors">
              Polityka prywatności
            </a>
            <a href="/contact" class="hover:text-foreground transition-colors">
              Kontakt
            </a>
          </div>
        </div>
      </div>
    </footer>
  </div>

  {/* Wrap with providers for React components */}
  <script>
    import { Providers } from '@/components/providers/Providers';
    import { createElement } from 'react';
    import { createRoot } from 'react-dom/client';

    // Find all React component roots and wrap them with Providers
    document.addEventListener('DOMContentLoaded', () => {
      const reactRoots = document.querySelectorAll('[data-react-root]');
      reactRoots.forEach((root) => {
        const Component = (root as any).__reactComponent;
        const props = (root as any).__reactProps || {};
        
        if (Component) {
          createRoot(root).render(
            createElement(Providers, { initialUser: null }, 
              createElement(Component, props)
            )
          );
        }
      });
    });
  </script>
</Layout>

