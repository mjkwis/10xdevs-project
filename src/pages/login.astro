---
/**
 * Login Page
 * 
 * User authentication page
 */

import PublicLayout from '@/layouts/PublicLayout.astro';
import { LoginForm } from '@/components/auth/LoginForm';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';

// DEV MODE: Always redirect to dashboard
if (import.meta.env.DEV) {
  return Astro.redirect('/dashboard/generate');
}

// PRODUCTION: If user is already logged in, redirect to dashboard
const { data: { session } } = await Astro.locals.supabase.auth.getSession();
if (session?.user) {
  return Astro.redirect('/dashboard/generate');
}
---

<PublicLayout title="Zaloguj się - 10x-cards" description="Zaloguj się do swojego konta 10x-cards">
  <div class="container mx-auto px-4 py-16">
    <div class="max-w-md mx-auto">
      <div class="text-center mb-8">
        <h1 class="text-3xl font-bold mb-2">Witaj ponownie!</h1>
        <p class="text-muted-foreground">Zaloguj się, aby kontynuować naukę</p>
      </div>

      <div data-react-root>
        <Card>
          <CardHeader>
            <CardTitle>Logowanie</CardTitle>
            <CardDescription>
              Wprowadź swój email i hasło, aby się zalogować
            </CardDescription>
          </CardHeader>
          <CardContent>
            <LoginForm client:load />
          </CardContent>
        </Card>
      </div>
    </div>
  </div>
</PublicLayout>

